**虚拟文件系统（有时也称作虚拟文件交换，更常见的是简称 VFS）作为内核子系统，为用户空间程序提供了文件和文件系统相关的接口。**

系统中所有文件系统不但依赖 VFS 共存，而且也依靠 VFS 系统协同工作。

通过虚拟文件系统，程序可以利用标准的 Uinx 系统调用对不同的文件系统，甚至不同介质上的文件系统进行读写操作.















```c
#include < include/linux/fs.h >
// 超级块对象
struct super_block {
	struct list_head	s_list;	       /* 指向所有超级块的链表 */
	dev_t		       	s_dev;	         /* 设备标识符 */
	unsigned char		s_dirt;          /* 修改（脏）标志 */
  
	unsigned char		s_blocksize_bits;   /* 以位为单位的块大小 */
	unsigned long		s_blocksize;        /* 以字节为单位的块大小 */
	loff_t		    	s_maxbytes;	        /* 文件大小上限 */
	struct file_system_type	*s_type;          /* 文件系统类型 */
	const struct super_operations	*s_op;      /* 超级块方法 */
	const struct dquot_operations	*dq_op;     /* 磁盘限额方法 */
	const struct quotactl_ops	*s_qcop;        /* 限额控制方法  */
	const struct export_operations *s_export_op;  /* 导出方法 */
	unsigned long		s_flags;          /* 挂載标志 */
	unsigned long		s_magic;          /* 文件系统的幻数 */ 
	struct dentry		*s_root;          /* 目录挂载点 */
	struct rw_semaphore	s_umount;     /* 卸载信号量 */
	struct mutex		s_lock;           /* 超级块信号量 */
	int			s_count;           /* 超级块引用计数 */
	int			s_need_sync;       /* 尚未同步标志 */
	atomic_t		s_active;       /* 活动引用计数 */
	void                    *s_security;   /* 安全模块  */
	struct xattr_handler	**s_xattr;       /* 扩展的属性操作 */
	struct list_head	s_inodes;        /* inodes 链表 */
  struct list_head	s_dirty;         /* 脏数据链表 */
  struct list_head	s_io;            /* 回写链表 */
 	struct list_head	s_more_io;       /*  更多回写的链表*/
	struct hlist_head	s_anon;	         /* 匿名目录项 */
	struct list_head	s_files;         /* 被分配文件链表 */
	struct list_head	s_dentry_lru;    /* 未被使用目录项链表 */
	int			s_nr_dentry_unused;        /* 链表中目录项的数目 */
	struct block_device	*s_bdev;       /* 相关的块设备 */
	struct backing_dev_info *s_bdi;    /*  */
	struct mtd_info		*s_mtd;          /* 存储磁盘信息 */
	struct list_head	s_instances;     /* 该类型文件系统 */
	struct quota_info	s_dquot;	       /* 限额相关选项 */
	int			s_frozen;              /* frozen 标志位 */
	wait_queue_head_t	s_wait_unfrozen;          /* 冻结的等待队列 */
	char       s_id[32];           /* 文本名字 */
	void 			*s_fs_info;          /* 文件系统特殊信息 */
	fmode_t			s_mode;            /* 安装权限 */
	u32		   s_time_gran;          /* 时间戳粒度 */
	struct mutex s_vfs_rename_mutex;	          /* 重命名信号量 */
	char *s_subtype;          /* 子类型名称 */
	char *s_options;          /* 已存安装选项 */
};
```















