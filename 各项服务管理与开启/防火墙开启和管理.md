## 目录

- [防火墙](#防火墙)
  - [安装防火墙](#安装防火墙)
  - [开启和关闭防火墙](#开启和关闭防火墙)
  - [配置防火墙](#配置防火墙)
  - [检查防火墙状态](#检查防火墙状态)





## 防火墙

### 安装防火墙

```bash
# debin 平台  10.2 版本
$ sudo apt install firewalld
```

### 开启和关闭防火墙

```bash
# 开启
$ systemctl start firewalld.service
$ systemctl enable firewalld.service

# 关闭
$ systemctl stop firewalld.service
$ systemctl disable firewalld.service

# 重启, 防火墙配置完成后，需要重启
$ systemctl restart firewalld.service
```



### 配置防火墙

```bash
# 设置 firewall 防火墙区域为 public ，在防火墙法放行服务的TCP以及UDP端口。
# 设置完成后，需要重启防火墙才可以适用配置
$ firewall-cmd --permanent --zone=public  \
	--add-port=123/udp 	 \         # chrony 时间同步服务器端口
	--add-port=53/tcp --add-port=53/udp  \        # DNS 服务端口
	--add-port=80/tcp    \         # apache2 服务端口(Web)
	--add-port=21/tcp    \         # ftp 服务器端口
	--add-port=443/tcp   \         # tomcat 服务端口
	--add-port=2049/tcp  --add-port=111/tcp	--add-port=111/udp  \  # nfs 服务端口
	--add-port=139/tcp	--add-port=445/tcp	  \      # samba 服务端口
	--add-port=860/tcp	--add-port=3260/tcp	  \      # iscsi 服务端口
	--add-port=5432/tcp --add-port=5432/udp	  \      # postgresql(数据库) 服务端口
	--add-port=67/udp --add-port=68/udp --add-port=69/udp 	  \    # pxe 服务端口
	--add-port=25/udp --add-port=110/tcp --add-port=143/tcp	--add-port=143/udp	  \    # mail 邮件 服务端口
	--add-port=6379/tcp  \    # redis 服务端口
	

# --permanent    放行动作
# --zone=区域名   指定区域名
# --add-port=端口/tcp或udp协议   添加放行或禁止的端口
```



```bash
# 配置自带防火墙 iptables, 放行所有端口
#   Debian 和 Ubuntu  通用。
iptables -P INPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -P OUTPUT ACCEPT
iptables -F
```



### 检查防火墙状态

```bash
$  firewall-cmd --list-all

```





