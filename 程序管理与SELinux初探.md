# 程序管理与 **SELinux** 初探

### 进程  与  程序 (**process & program**) 

- **程序** 存放在磁盘中的二进制可执行文件
- **进程** 在内存中执行,并且拥有PID
- PID   唯一进程标识符
  - 使用 **`ps -l `** 指令,  通过输出的 PPID 可以判断 当前进程的父进程是哪一个.
- 只要是常驻内存的进程,都可以称为是**服务**
  - 服务 的名称一般都是以 d 结尾.便于分辨.
- Linux 下面执行一个指令时，系统会将相关的权限、属性、程序码 与数据等均载入内存， 并给予这个单元一个程序识别码 (PID) 
  - 最终该指令可以进行的任 务则与这个 PID 的权限有关 

### 工作管理 (**job control**) 

**当我们登陆系统取得 bash shell 之后，在单一终端机接口下 `同时进行多个工作的行为`管理  **

**进行工作管理的行为中， 其实每个工作都是目前 bash 的子程序，亦即彼此之间是有相关性的。 我们无法以 job control 的方式由 tty1 的环境 去管理 tty2 的 bash **

-  bash 的 job control 必须要注意到的限制 
  - 这些工作所触发的程序必须来自于你 shell 的子程序(只管理自己的 bash); 
  - 前景:  你可以控制与下达指令的这个环境称为前景的工作 (foreground); 
  - 背景:  可以自行运行的工作，你无法使用 [ctrl]+c 终止他，可使用 bg/fg 调用该工作; 
    - 背景里面 的工作状态又可以分为“暂停 (stop)”与“运行中 (running)” 
    - 在不需要交互的指令 最后面加上 ` &`  符号,就可以直接划分入bash背景作业了.
      - 但是当你离线之后, 这个背景作业就会被终止!!
      - 如果背景进程有输出, 那么应该使用 `数据流重定向`  放入某个文件中. (/dev/shm 文件在内存中存储)
    - 当进程在前景执行时, 可以使用组合键 **`[ctrl + z]`**  暂停当前进程,并放入背景.(`fg`回到前台,`bg`放到后台)
  - 背景中“执行”的程序不能等待 terminal/shell 的输入(input) 

```bash
$jobs     [-lrs]
选项与参数:
 -l  :除了列出 job number 与指令串之外，同时列出 PID 的号码;
 -r  :仅列出正在背景 run 的工作;
 -s  :仅列出正在背景当中暂停 (stop) 的工作。
 
 $jobs -l
[1]   已停止               vim a    #无 + - 号的表示很早就已经到背景的进程
[2]-  已停止               vim b    # - 号表示倒数第二个进来的背景进程
[3]+  已停止               vim c    # + 号表示最近加入进来的背景进程
         # fg 或者 bg 指令会从最后一个开始向前恢复 (+)
```

```bash
$fg  %工作号码   #从后台的暂停状态恢复到前台, 工作号码就是jobs所列出来的号码, %1 %2 %3 + - 之类的.(也可以不加), 这个时候 jobs的 + - 号会顺延, 倒是号码不会变化.
$bg  %工作号码   #让背景中暂停状态的进程变为"运行中", 标识符 stopped(暂停) 会变成 running(运行), 并且指令后面会出现 '&' 符号.
```

```bash
$kill   -signal  %jobnumber 
$kill  -l
$kill -9   PID
选项与参数:
 -l  :这个是 L 的小写，列出目前 kill 能够使用的信号 (signal) 列表
signal  :发送给后面的进程什么信号 , 用 kill -l 可知:
      -1  :重新读取一次参数的配置文件 (类似 reload);
      -2  :代表与由键盘输入 [ctrl]-c 同样的动作;
      -9  :立刻强制删除一个工作;
      -15 :以正常的程序方式终止一项工作。与 -9 是不一样的。

范例一:找出目前的 bash 环境下的背景工作，并将该工作“强制删除”。
$jobs -l
[1]-  2161 停止                  vim a
[3]+  2163 停止                  vim c
$kill -9  %3 ; jobs
[1]+  已停止               vim a

```

### 离线管理  (系统后台)

```bash
$nohup [指令与参数]      #在终端机前景中工作 
$nohup [指令与参数] &    #在终端机背景中工作
$patree                 #可以查询到, nohup 设定的离线工作

上面两个,当你离线时,进程还会继续进行,不会因为你的离线 而导致程序出现终止等情况. (不支持bash内置指令)
```



​	