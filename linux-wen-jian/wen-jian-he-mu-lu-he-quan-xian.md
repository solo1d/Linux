# 文件和目录和权限

## 命令

### chmod , chgrp ,chown

```bash
修改文件所属组命令:  
     $chgrp  -R   组名    文件名      #参数-R表示递归修改,组名在 /etc/group 中, root命令

修改文件拥有者命令:  
     $chown  -R   用户名  文件名       #用户名在 /etc/passwd 中,  root命令
     $chown  -R  用户名:组名   文件名   #同时修改所属组,拥有者
 修改文件权限: 
      $chmod  -R 777  文件名          #这些权限只针对文件内容,对文件是否可以删除没有关系.
      $chmod  -R u=w,g+r,o-x 文件名   #等于, 增加, 减少
      $chmod  -R a-x  文件名          #a表示所有人

```

### 掩码

```bash
umask 的优点:
    umask可以拿掉一些权限,因此适当的定义umask 有助于系统的安全,因为它可以用来创建默认的目录或文件权限.
```

## 目录  和 路径命令 以及创建目录命令

**开放一个文件夹,那么至少具备 rx 两个权限.**

```bash
对目录拥有 x执行权限  可以进入该目录.
对目录拥有 r读权限    可以查看目录内的文件清单.
对目录拥有 w写权限    可以删除目录内的文件,修改文件名和目录名,创建新的文件和目录,拷贝文件.
```

```bash
命令 $pwd -P 可以得到确实的绝对路径,而非使用链接(link)路径.
命令 $mkdir    参数 -m可以直接设置权限 , -p可以递归创建目录.
```

## 文件

#### 对文件拥有 r读取权限 才可以进行拷贝操作.

## 特殊权限  \(SUID, SGID, SBIT\)

### SUID

```bash
SUID  这权限的标志是 s ,出现在 "文件拥有者 的x权限上 ", (-rwsr-xr--)
    SUID 仅可对二进制程序有效 ,  " 使用命令 $chmod 4777 文件   进行设置.(主要是 4 ) "
        执行者对该程序需要具有 x 的可执行权限.
        本权限仅在执行该程序的过程中有效 (run-time)
        执行者将具有该程序拥有者 (owner)的权限.
            (/bin/passwd  这个程序就是root的所有者, 当任何用户执行这个命令的时,会暂时获得root权限)
```

### SGID

```bash
SGID  这权限的表示也是 s ,但是出现在 "所属组 的x权限上", (-rwxr-sr--)
    SGID 可以对程序或目录进行设置. " 使用命令 $chmod 2777 文件或目录   进行设置.(主要是 2 ) "
        程序:   程序执行者对于该程序来说,需要具备x的权限.
               执行者在执行的过程中将会获得该程序组群的支持.  (比如 locate 命令)
        目录: 使用者若对此目录具有 r 与 x 的权限时,该使用者能够进入次目录.
              使用者在此目录下的有效群组 将会变成该目录的群组.
              用途: "若使用者在此目录下具有w的权限(可以新建文件),该使用者所创建的新文件,该新文件的群组与
                     此目录的群组相同,但是所有者会是使用者"
```

### SBIT

```bash
SBIT  这权限的表示是 t ,出现在 "其他人 的x权限上". (-rwxr-xr-t)
    SBIT 可以对目录进行设置, " 使用命令 $chmod 1777 文件   进行设置.(主要是 1 ) "
        当使用者对此目录具有 w, x 权限,亦具有写入的w权限时.
        当使用者在该目录下创建文件或目录时,仅有自己与root才有权利删除该文件.
当用 " 使用命令 $chmod 7666 文件   进行设置.(主要是 7 ) "  设置文件时,会出现大S 和大T ,表示没有x权限.

```

## 隐藏属性

#### 只有 Ext2/Ext3/Ext4 传统的 Linux文件系统上面,隐藏属性才可以完整生效.\(xfs文件系统只支持一部分\)

#### 设置文件隐藏属性, 一般都是root 才有权利来设置,而且安全性很高.

```bash
$chattr [+-= 具体参数] 文件或目录
        +  -  =  增加,减少,设置  后面的具体参数
            具体参数:   A  :存取文件时,不会修改atime 读取时间. 可以提高I/O 速度.
                       a  :让文件只能增加数据 ,不可以删除或修改原有数据.
                       i  :让文件 不可以被 删除,修改,移动,链接,新增数据. 非常安全
                       u  :可以让被删除的文件的数据内容保存在磁盘上, 用于数据救援.
            例子:  #chattr +a -i  afile
            
查看文件被设置的隐藏属性
    $lsattr  参数   文件或目录
        参数:   -a :显示隐藏文件 
               -d :如果接的是目录,仅列出目录本身的属性而非目录内的文件名.
               -R :连同子目录也一并列出来 .
```





